{% extends "parent/base.html" %}
{% load jformat %}
{% block title %}Post Detail{% endblock %}

{% block content %}
    <h1>Post Detail</h1>
    <hr>
    <h2>{{ post.title }}</h2>
    <p>{{ post.description | linebreaks }}</p>
    <h4>Author: {{ post.author }}</h4>
    <h4>{{ post.publish | jformat:'%Y/%m/%d - %H:%m' }}</h4>
    <hr>

    <div>
        {% with comments.count as cm_count %}
            {{ comments.count }} comment{{ cm_count | pluralize }}
        {% endwith %}
    </div>

    <div>
        {% for cm in comments %}
            {{ cm.body | linebreaks }}
            <br>
            {{ cm.name }}
        {% empty %}
            کامنتی وجود ندارد!
        {% endfor %}
    </div>

    <form method="post" action="{% url 'blog:post_comment' post.id %}">
        {% csrf_token %}
        {{ form.as_p }}
        <input type="submit" value="افزودن کامنت">
    </form>
{% endblock %}